[
    {
        "type": "comment",
        "value": "// Robigo Luculenta -- Proof of concept spectral path tracer in Rust"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// Copyright (C) 2014-2015 Ruud van Asseldonk"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "//"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// This program is free software: you can redistribute it and/or modify"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// it under the terms of the GNU General Public License as published by"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// the Free Software Foundation, either version 3 of the License, or"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// (at your option) any later version."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "//"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// This program is distributed in the hope that it will be useful,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// but WITHOUT ANY WARRANTY; without even the implied warranty of"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// GNU General Public License for more details."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "//"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// You should have received a copy of the GNU General Public License"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// along with this program. If not, see <http://www.gnu.org/licenses/>."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "use"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "std"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "consts"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "PI"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "use"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersection"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "use"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "use"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "cross"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Represents a surface that can be intersected with a ray."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "trait"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Returns whether the surface was intersected, and if so, where."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Represents a part of space."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "trait"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Returns whether the specified point `p` lies inside the volume."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// An infinitely large plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// A unit vector perpendicular to the plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// A point in the plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Creates a new plane with the specified `normal` through `offset`."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Intersects a plane, and returns the position, distance, and the dot"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// product of the normal with the ray."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                   "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// Transform the ray into the space where the plane is a linear"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// subspace (a plane through the origin)."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "=="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// A ray has one direction, do not hit backwards."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "intersect_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "map"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": "|("
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "group",
        "value": ")|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// Planes are two-sided."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// Tangent is not used here."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "zero"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// An infinitely large one-sided plane that cuts space in half."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// A unit vector perpendicular to the plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// A point in the plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Creates a new space partitioning with the specified `normal` through"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// `offset`. The side that the normal points to is outside."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "intersect_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "map"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": "|("
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "_"
    },
    {
        "type": "group",
        "value": ")|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// Tangent is not used here."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "zero"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Circle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// A unit vector perpendicular to the circle."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The centre of the circle."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The square of the radius of the circle."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Circle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Circle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Circle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// Filter(ed) is implemented manually, because it is deprecated in the standard"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "// library, but it allows for some elegant code, so I wanted to keep it."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "trait"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Filter"
    },
    {
        "type": "type",
        "value": "<T>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "filter"
    },
    {
        "type": "type",
        "value": "<F>"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "condition"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "F"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "Self"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "where"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "F"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Fn"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "T"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "type",
        "value": "<T>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Filter"
    },
    {
        "type": "type",
        "value": "<T>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<T>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "filter"
    },
    {
        "type": "type",
        "value": "<F>"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "condition"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "F"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<T>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "where"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "F"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Fn"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "T"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "match"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "x"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "condition"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "x"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "x"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Circle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "intersect_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "filter"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "|"
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "_"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "_"
    },
    {
        "type": "group",
        "value": ")|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// Allow only indersections that lie inside the circle."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "magnitude_squared"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "map"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": "|("
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "group",
        "value": ")|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// Planes are two-sided."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// Tangent is not used here."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "zero"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The position of the centre of the sphere."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The square of the radius of the spere."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Returns whether a ray intersects the sphere, and if it does,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// the distances along the ray."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "get_intersections"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Compute the a, b, c factors of the quadratic equation."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "1.0"
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "centre_offset"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "centre_offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "c"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "centre_offset"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "magnitude_squared"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// The discriminant determines whether the equation has a solution."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "discriminant"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "4.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "c"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "discriminant"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// For a negative discriminant, there is no solution."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "discriminant"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sqrt"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "number",
        "value": "0.5"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "number",
        "value": "0.5"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// TODO: is there a macro for this, like try!?"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Maybe write it myself?"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "match"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "get_intersections"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "x"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "x"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// One of the ts must be positive at least, for an intersection."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&&"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&&"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// For negative t, the sphere lies behind the ray entirely."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// The intersection point can be calculated from the distance."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// The normal points radially outward everywhere."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normalise"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// The tangent vector is perpendicular to the surface normal"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// and the up vector. The choice is quite arbitrary."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "up"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "1.0"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "cross"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "up"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normalise"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "intersection"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Sphere"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "magnitude_squared"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "radius_squared"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "operator",
        "value": "#"
    },
    {
        "type": "group",
        "value": "["
    },
    {
        "type": "identifier",
        "value": "derive"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "Clone"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": "]"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Paraboloid"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The position of the focal point projected onto the plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The normal of the plane, a vector of length 1 perpendicular to"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// the plane (pointed towards the focal point)."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The position of the focal point, relative to the offset point."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "focal_point"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Paraboloid"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Creates a new paraboloid, for the plane with the specified"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// normal, the top centered between the specified offset, and"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// specified focal distance (from the top, not the plane)."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "               "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "               "
    },
    {
        "type": "identifier",
        "value": "focal_distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "               "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Paraboloid"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Paraboloid"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "focal_distance"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "focal_point"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "focal_distance"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Paraboloid"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Transform the ray into the space where the plane is a linear"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// subspace (a plane through the origin)."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "focal_offset"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "focal_point"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_o"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d_dot_f"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "focal_offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Compute a, b, and c for the quadratic paraboloid equation."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "1.0"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_o"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d_dot_f"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "c"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_o"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "n_dot_o"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "focal_offset"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "magnitude_squared"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// If a is zero, there is no quadratic equation,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// and the solution is a simple line intersection."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "=="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "c"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// For negative t, the paraboloid lies behind the ray."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// The discriminant determines whether the equation"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// has a solution."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "4.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "c"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// If it is less than zero, there is no intersection."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// Otherwise, the equation can be solved for t."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sqrt_d"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "d"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sqrt"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.5"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sqrt_d"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.5"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "b"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sqrt_d"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "comment",
        "value": "// Pick the closest non-negative t."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "match"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "t1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&&"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "||"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "number",
        "value": "_"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "q"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "comment",
        "value": "// For negative t, the paraboloid lies behind the ray entirely."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "number",
        "value": "_"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "=>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "None"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Compute the intersection details and normal."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "origin"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "direction"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "local_pos"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "plane_pr"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "local_pos"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "dot"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "local_pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "focal_point"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "plane_pr"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "normalise"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Intersection"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "pos"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "tangent"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "zero"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "comment",
        "value": "// Not used here."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "t"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "intersection"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// An intersection of two volumes/surfaces, the boolean \u2018and\u2019."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "struct"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The first of the two surfaces."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "surface1"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// The second of the two surfaces."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "surface2"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T2"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// Creates a new object which is the intersection of the two"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "/// specified objects."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "s1"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "s2"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "surface1"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "s1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "identifier",
        "value": "surface2"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "s2"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "where"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T1"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T2"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Surface"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "identifier",
        "value": "Ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Option"
    },
    {
        "type": "type",
        "value": "<Intersection>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "intersect"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "ray"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// Invalidate intersections that do not lie in both volumes."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "filter"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "|"
    },
    {
        "type": "identifier",
        "value": "i"
    },
    {
        "type": "operator",
        "value": "|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "i"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "filter"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "|"
    },
    {
        "type": "identifier",
        "value": "i"
    },
    {
        "type": "operator",
        "value": "|"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "i"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "position"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "comment",
        "value": "// If both intersections are valid, pick the closest one."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "is_some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&&"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "is_some"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "keyword",
        "value": "if"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "unwrap"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "unwrap"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "distance"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "else"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                "
    },
    {
        "type": "keyword",
        "value": "return"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "            "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "identifier",
        "value": "i1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "or"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "i2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "impl"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "for"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<T1, T2>"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "where"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T1"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "T2"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Volume"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "&"
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bool"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "        "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "&&"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "value",
        "value": "self"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "surface2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "lies_inside"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "type"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "InfinitePrism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "operator",
        "value": "<"
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<SpacePartitioning, SpacePartitioning>"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                              "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "operator",
        "value": ">"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "type"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ThickPlane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<SpacePartitioning, SpacePartitioning>"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "type"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Prism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<InfinitePrism, ThickPlane>"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "type"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "HexagonalPrism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "type",
        "value": "<InfinitePrism, Prism>"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Constructs an equilateral triangle with specified edge length,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// infinitely extruded along the axis vector,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// rotated at the specified angle."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_infinite_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "           "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "           "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "           "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "           "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "InfinitePrism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "3.0"
    },
    {
        "type": "identifier",
        "value": "_f32"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sqrt"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "6.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "PI"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "3.0"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a3"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "PI"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "4.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "/"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "3.0"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// Calculate the three unit vertices on the xy-plane."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "a1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "cos"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sin"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "a2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "cos"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sin"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p3"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "a3"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "cos"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "a3"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "sin"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "0.0"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// Now rotate the vertices, so they lie in the plane which"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// the axis vector is the normal."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p1"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "rotate_towards"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p2"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "rotate_towards"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p3"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p3"
    },
    {
        "type": "operator",
        "value": "."
    },
    {
        "type": "identifier",
        "value": "rotate_towards"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// Then the planes through the vertices can be constructed."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p2"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp3"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "p3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "p3"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "radius"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// And finally combine the partitionings,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// so that the extruded triangle is \u2018carved out\u2019."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "sp1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp3"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Constructs a thick, infinite \u2018wall\u2019-like structure. One surface"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// passes through the specified offset, the other one is translated"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// along the normal for the specified thickness distance."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_thick_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                       "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                       "
    },
    {
        "type": "identifier",
        "value": "thickness"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                       "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "ThickPlane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// The plane is extruded along the normal, so the plane through"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// the offset vector should have the opposite normal."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp1"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// And the extruded plane has the normal in the direction"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// of the extrusion."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp2"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "SpacePartitioning"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "normal"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "thickness"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "sp1"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "sp2"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Constructs a prism, oriented along the specified axis, its"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// equilateral base triangle with specified edge length at the"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// specified offset, rotated with the specified angle, and then"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// extruded along the axis for the specified height."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                 "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                 "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                 "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                 "
    },
    {
        "type": "identifier",
        "value": "height"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                 "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Prism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// The infinite prism as before."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "prism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_infinite_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// But now clipped by a thick plane along the axis."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "plane"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_thick_plane"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "height"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "prism"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "plane"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// Constructs a prism, oriented along the specified axis, its"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// equilateral base triangle with specified edge length at the"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// specified offset, rotated with the specified angle, and then"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// extruded along the axis for the specified height. Then its corners"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// are capped, such that the effective edge length becomes the edge"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "comment",
        "value": "/// length minus twice the bevel size."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "keyword",
        "value": "pub"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "keyword",
        "value": "fn"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_hexagonal_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "Vector3"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "identifier",
        "value": "bevel_size"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "identifier",
        "value": "height"
    },
    {
        "type": "group",
        "value": ":"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "f32"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                           "
    },
    {
        "type": "operator",
        "value": "->"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "HexagonalPrism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "group",
        "value": "{"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// The \u2018bevel edges\u2019 (which is just an infinitely extruded"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// triangle; an infinte prism). It is rotated 180 degrees,"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// so it cuts off the corners. If the edge length is twice"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// the edge length of the desired prism, it does not cut the"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// corners at all."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "iprism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_infinite_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                                    "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "2.0"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "-"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "bevel_size"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "*"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "number",
        "value": "3.0"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "                                    "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "+"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "PI"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "comment",
        "value": "// And the normal prism, without bevel."
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "keyword",
        "value": "let"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "prism"
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "operator",
        "value": "="
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "new_prism"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "axis"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "offset"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "edge_length"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "angle"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "height"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "statement terminator",
        "value": ";"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "whitespace",
        "value": "    "
    },
    {
        "type": "identifier",
        "value": "Compound"
    },
    {
        "type": "group",
        "value": "::"
    },
    {
        "type": "identifier",
        "value": "new"
    },
    {
        "type": "group",
        "value": "("
    },
    {
        "type": "identifier",
        "value": "iprism"
    },
    {
        "type": "group",
        "value": ","
    },
    {
        "type": "whitespace",
        "value": " "
    },
    {
        "type": "identifier",
        "value": "prism"
    },
    {
        "type": "group",
        "value": ")"
    },
    {
        "type": "newline",
        "value": "\r\n"
    },
    {
        "type": "group",
        "value": "}"
    }
]
